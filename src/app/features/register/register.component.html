<div class="auth-page">
  <div class="auth-card">
    <div class="brand-section">
      <div class="logo-icon">
        <i class="pi pi-user-plus"></i>
      </div>
      <h1 class="brand-title">Criar Conta</h1>
    </div>

    <form [formGroup]="form" (ngSubmit)="onSubmit()" class="auth-form">
      
      <!-- Email -->
      <div class="form-field">
        <span class="p-input-icon-left w-full">
          <i class="pi pi-envelope"></i>
          <input 
            pInputText 
            type="email"
            formControlName="email" 
            placeholder="Email" 
            class="custom-input" 
          />
        </span>
        <small *ngIf="form.controls.email.touched && form.controls.email.invalid" class="p-error block mt-1">
          Informe um e-mail válido.
        </small>
      </div>

      <!-- Username -->
      <div class="form-field">
        <span class="p-input-icon-left w-full">
          <i class="pi pi-user"></i>
          <input 
            pInputText 
            type="text"
            formControlName="username" 
            placeholder="Usuário" 
            class="custom-input" 
          />
        </span>
        <small *ngIf="form.controls.username.touched && form.controls.username.invalid" class="p-error block mt-1">
          Usuário é obrigatório.
        </small>
      </div>

      <!-- Telefone -->
      <div class="form-field">
        <span class="p-input-icon-left w-full">
          <i class="pi pi-phone"></i>
          <p-inputMask 
            styleClass="custom-input w-full"
            formControlName="telefone" 
            mask="(99) 99999-9999" 
            placeholder="(00) 00000-0000">
          </p-inputMask>
        </span>
        <small *ngIf="form.controls.telefone.touched && form.controls.telefone.invalid" class="p-error block mt-1">
          Telefone é obrigatório.
        </small>
      </div>

      <!-- Senha -->
      <div class="form-field">
        <span class="p-input-icon-left w-full">
          <i class="pi pi-lock"></i>
          <input 
            pInputText 
            type="password" 
            formControlName="senha" 
            placeholder="Senha" 
            class="custom-input" 
          />
        </span>
        <small *ngIf="form.controls.senha.touched && form.controls.senha.invalid" class="p-error block mt-1">
          Min. 6 caracteres.
        </small>
      </div>

      <!-- Confirm Senha -->
      <div class="form-field">
        <span class="p-input-icon-left w-full">
          <i class="pi pi-lock-open"></i>
          <input 
            pInputText 
            type="password" 
            formControlName="confirmSenha" 
            placeholder="Confirmar Senha" 
            class="custom-input" 
          />
        </span>
        <small *ngIf="form.controls.confirmSenha.touched && form.hasError('mismatch')" class="p-error block mt-1">
          As senhas não coincidem.
        </small>
      </div>

      <button 
        pButton 
        type="submit" 
        label="REGISTRAR" 
        class="auth-button" 
        [loading]="loading"
        [disabled]="form.invalid || loading">
      </button>

      <div class="login-link">
        <span>Já possui conta? </span>
        <a routerLink="/">Entrar</a>
      </div>

      <p-message *ngIf="success" severity="success" text="Cadastro realizado com sucesso." styleClass="w-full mt-3"></p-message>
      <p-message *ngIf="error" severity="error" [text]="error" styleClass="w-full mt-3"></p-message>
    </form>
  </div>
</div>
